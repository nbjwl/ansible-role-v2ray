---
- name: create config folder
  file:
    path: "{{ v2ray_config_path }}"
    state: directory

- name: install v2ray (docker)
  include_tasks: docker.yml
  when: v2ray_install_type == 'docker'

- name: install v2ray (native)
  include_tasks: native.yml
  when: v2ray_install_type == 'native'

- name: config
  template:
    src: config.json.j2
    dest: "{{ v2ray_config_path }}/config.json"
  notify: restart v2ray
